# Build and Run Instructions

# ⚠️ How to use docker:
0. You need Python and pip installed
1. Run the setup script in order to build the container
    (This step is needed everytime the code is edited).

    On windows CMD:
    ```ps
    setup.bat
    ```
    On MacOS/Linux:
    ```bash
    bash setup.sh
    ```
2. Now you can execute from the terminal commands like:
    ```ps
    python source/main.py --mode CP SMT MIP SAT --range 1 45 --check
    ```
3. To stop the container use the following commands:
    ```bash
    exit
    docker-compose stop
    ```
    In alternative to `docker-compose stop` the command `docker-compose down`
    can be used to DELETE the container.
4. Optional: deactivate the virtual environment:
    ```bash
    deactivate
    ```

This project can be executed either **from the top-level `main.py`** 
(recommended) or by running **individual solvers** directly.

## Using virtual environment locally
```ps
python -m venv venv
venv\Scripts\activate
# library that search in the imports for modules that need to be installed
pip install pipreqs
pip freeze > requirements.txt
pipreqs . --force --encoding utf-8
pip install -r requirements.txt
python source/main.py --mode CP SMT MIP SAT --range 1 45 --check
```

## 1️⃣ Running All Solvers via `main.py`

The `main.py` script provides a unified interface for running one or multiple
solvers and optionally checking their solutions.

**Command Example:**

Running all solvers with validity check:
```bash
python source/main.py --mode CP SMT MIP SAT --range 1 45 --check
```
Running just one solver without validity check:
```bash
python source/main.py --mode CP --range 1 45 --check
```
<span style="color: red;"><b>⚠️DO NOT RUN THE FOLLOWING COMMAND:</span>
```bash
cd ./source/
python main.py --mode CP --range 1 45 --check
```

**Explanation of arguments:**

<!-- check that CP is called as a solver -->

* `--mode`: Specify one or more solvers to run. Choices: `CP`, `MIP`, `SAT`, `SMT`.
* `--range`: Provide the instance range as two numbers (`LOWER UPPER`).
* `--check`: Optional flag to validate solutions after solving.

This command will run **all selected solvers** on the specified range and check 
the results automatically.

---

## 2️⃣ Running Individual Solvers

Each solver can also be run independently from its folder. This is useful for 
testing or debugging a single solver.

**Command Example (Windows, CP solver):**

```bash
cd CDMO-project-\source\CP
python run_cp.py --range 1 45
```

**Arguments:**

* `--range`: Instance range to solve (`LOWER UPPER`).

> Note: Individual solvers will not automatically check their solutions unless 
    explicitly invoked with `solution_checker.py`.

---

## 3️⃣ Solution Checking

To check the validity of solver outputs separately:

```bash
python solution_checker.py <path_to_solution_directory>
```

* `<path_to_solution_directory>`: Directory containing `.json` solution files 
    generated by the solvers.

# 1 How to activate the virtual environment:
On windows:
```
venv\Scripts\activate
```
On mac/linux:
```bash
source venv/bin/activate
```

# Project Overview