# Build and Run Instructions

This project implements four modelling approaches (**CP**, **SAT**, **SMT**, **MIP**).
All experiments—single-instance execution or full-batch runs—can be reproduced **without modifying the source code**, using only command-line arguments.

## 1. Project Structure

```
source/
|___CP/
    SAT/
    SMT/
    MIP/
    main.py
    run_cp.py
    run_sat.py
    run_smt.py
    run_mip.py
    solution_checker.py
Dockerfile
setup.sh
setup.bat
README.md
```

Each model is implemented inside its own subfolder (`source/CP`, `source/SMT`, etc.).
The `Dockerfile` builds an image capable of running all models.

## 2. Building and Running the Docker Environment

0. You need Python, pip and docker installed. 
1. Run the setup script in order to build the container (This step is needed everytime the code is edited). On windows CMD:
```ps
    setup.bat
```
On MacOS/Linux:
```ps
    bash setup.sh
```
2. Now you can execute from the terminal commands like:
```ps
    python source/main.py --mode CP SMT MIP SAT --range 1 45 --check
    python source/run_cp.py --range 1 45 --obj true
```
3. To stop the container use the following commands:
```ps
    exit
    docker-compose stop
```
In alternative to docker-compose stop the command docker-compose down can be used to DELETE the container from your machine.

## 3. Running the Project

The project can be executed in two ways:

- **3.1. Running all solver** via a the unified `main.py` interface
- **3.2. Individual solver scripts** (`run_cp.py`, `run_sat.py`, `run_smt.py`, `run_mip.py`)

### **3.1. Running All Solvers**

`main.py` provides a single command to reproduce all experimental results.

```ps
python source/main.py --mode CP SAT SMT MIP --range 1 18 --check
```

This command:

* Runs every solver (**CP, SAT, SMT, MIP**)
* On all instances in the range `[1, 18]`
* Checks each generated solution
* Produces structured result files in each solver’s output directory

### 3.2. Running a Single Model on a Single Instance

Below are examples to run a model on a single instance for each solver:

**CP Example**

```ps
python source/run_cp.py --range 12 12 --solver chuffed --search ff --obj true --sb false
```

**SAT Example**

```ps
python source/run_sat.py --range 7 7 --obj false --sb both
```

**SMT Example**

```ps
python source/run_smt.py --range 3 3 --obj true
```

**MIP Example**

```ps
python source/run_mip.py --range 5 5 --solver gurobi --obj both
```

### Arguments reference

**Common to All Solvers**

| Argument  | Meaning                                 | Accepted Values         | Required |
| --------- | --------------------------------------- | ----------------------- | -------- |
| `--range` | Instance interval (`LOWER UPPER`)       | two integers            | **yes**  |
| `--obj`   | Whether to run objective model variants | `true`, `false`, `both` | no       |
| `--sb`    | Whether to enable symmetry breaking     | `true`, `false`, `both` | no       |

**Arguments Specific to CP**

| Argument   | Description       | Values                              |
| ---------- | ----------------- | ----------------------------------- |
| `--solver` | CP solver backend | `gecode`, `chuffed`                 |
| `--search` | Search heuristic  | `base`, `ff`, `DWD+min`, `DWD+rand` |

**Arguments Specific to MIP**

| Argument   | Description        | Values                    |
| ---------- | ------------------ | ------------------------- |
| `--solver` | MIP solver backend | `scip`, `cplex`, `gurobi` |

## 4. Solution Validation

To separately validate the outputs produced by the different approaches, run the following command:
```ps
python source/solution_checker.py <path_to_solution_directory>
```
Here, <path_to_solution_directory> refers to the directory that contains the .json solution files generated by the solvers.

# Project Overview

