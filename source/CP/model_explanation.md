# Introduction

Given $n$ the number of teams we defined the following instance variables:

- $Teams = \{1, ..., n\}$

- $Weeks = \{1, ..., n-1\}$

- $Periods = \{1, .., n/2\}$

- $Slots = \{1, ..., 2\}$ (first slot is home and second slot is away)

# CP Model

## Decision Variables

Given the instance variables defined in the introduction and given $w \in Weeks$, $p \in Periods$, $s \in Slots$, $i \in Teams$ we defined the following **decision variables**:

- a. $roundRobin_{p,w,s} \in Teams$ &rarr; contains the team's combinations generated by following the rules of a round robin schedule exposed in the paper @vanhenteryck_1999

- b. $periodPerm_{w,p} \in Periods$ &rarr; periods permutations, used to break periods symmetries

- c. $team_{p,w,s} \in Teams$ &rarr; contains the solution of the problems which repects also constraints C7 and C8

In addition we added the following decision variables for the optimization version of the problem:

- d. $swapTeam_{p,w} \in {True, False}$ &rarr; if true means the order of the teams for that match needs to be flipped (swapping home and awaw teams)

- e. $homeCount_i$ &rarr; the times each teams appears in position 1 across all weeks/periods

- [away = weeks - home (since each team plays exactly once per week)] &rarr; implied variable, not really defined in the minizinc code

- f. $deviation_i = |2*homeCount_i - (n-1)|$ &rarr; 
- g. $maxDeviation$ 

## Objective Function
<!-- % home = times team appears in position 1 across all weeks/periods
% away = weeks - home (since each team plays exactly once per week)
% deviation[i] = |home[i] - away[i]| = |2*home[i] - weeks|
% max_deviation = max(i in 1..n)(deviation[i]); -->

$\texttt{minimize}( \max_{i \in T}|h_i - a_i|)$

## Constraints

- C1 n mod 2 = 0 &rarr; n must be positive
- C2 "canonical week" following the @vanhenteryck_1999 paper, copy mathematical formula here
- C3 "transition rule" following @vanhenteryck_1999
- C4 alldifferent on periods permutations
- C5 anchoring week 1 for symmetry breaking
- C6 channelling constraint? that connects the three variables together (four in the case of the objective function)
- C7 Each team plays exactly once per week
- C8 Each team plays at most twice per period across all weeks

## Validation